# IP查询

## 介绍
IP查询是一个用来展示MCP服务如何被引入的例子，通过这个案例可以学习如何配置和使用外部MCP服务来扩展系统功能。

## Func-Agent增强模式

### 说明
本例子使用增强的func-agent来实现IP查询，展示如何集成MCP服务到系统中

### 具体步骤

**第1步** 进入MCP配置页面
- 点击对话框右上角的配置图标
- 选择"Tools/MCP配置"
- 点击"新建MCP配置"

**第2步** 获取MCP服务信息
- 登录网站 `mcp.higress.ai`
- 使用阿里云账号登录（有免费额度）
- 搜索"IP Location"服务
- 打开该服务，复制右边的SSE URL
- 注意：只复制URL部分，不要包含JSON格式，类似：`"url": "https://mcp.higress.ai/mcp-ip-query/xxxxxxxxx/sse"`

**第3步** 配置MCP服务
- 回到系统配置页面
- 在配置框中输入以下信息：
  - **MCP名称**：`ip查询`
  - **链接类型**：`sse`
  - **URL**：粘贴刚才复制的SSE URL
- 点击"保存"按钮
- 等待系统返回确认信息
- 确认MCP服务显示为"启用状态"

**第4步** 返回主界面
- 点击"返回首页"按钮

**第5步** 进入Func-Agent计划模式
- 点击系统右下角的func-agent计划模式
- 在左边会出现一个新的框"Func-agent计划模板"

**第6步** 创建新计划
- 点击"新建计划"按钮

**第7步** 配置计划模板
- 点击"添加第一个步骤"
- 依次输入以下信息：
  - **计划模板名字**：`用ip查询查询本机ip`
  - **任务需求**：`用ip查询工具查询本机ip`
  - **任务的输出要求**：`空`

**第8步** 选择MCP工具
- 点击"添加/删除工具"按钮
- 选择"ip查询"工具
- 启用全部相关功能

**第9步** 保存计划
- 点击"save"按钮
- 等待提示"保存成功"

**第10步** 执行计划
- 点击"执行计划"按钮
- 观察系统查询本机IP的过程

**第11步** 查看执行详情（可选）
- 点击"详细执行计划"按钮
- 查看详细的执行步骤
- 观察具体的MCP工具调用过程

## 预期结果
- 系统成功查询并显示本机IP地址
- 通过执行详情可以查看完整的MCP服务调用过程
- 学习如何集成和使用外部MCP服务

## 技术要点
- MCP（Model Context Protocol）服务集成
- SSE（Server-Sent Events）连接方式
- 外部服务配置和管理
- Func-Agent模式下的工具调用
